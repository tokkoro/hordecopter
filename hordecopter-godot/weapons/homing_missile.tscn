[gd_scene format=3 uid="uid://cqs33fbdyn8gr"]

[ext_resource type="Script" uid="uid://cv1xcl1f2cxtd" path="res://weapons/homing_missile.gd" id="1_missile"]

[sub_resource type="CylinderMesh" id="CylinderMesh_rocket_body"]
top_radius = 0.08
bottom_radius = 0.08
height = 0.6
radial_segments = 12

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_body"]
albedo_color = Color(0.82, 0.84, 0.88, 1)

[sub_resource type="ConeMesh" id="ConeMesh_rocket_nose"]
radius = 0.09
height = 0.2
radial_segments = 12

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nose"]
albedo_color = Color(0.9, 0.28, 0.18, 1)

[sub_resource type="BoxMesh" id="BoxMesh_rocket_fin"]
size = Vector3(0.02, 0.12, 0.06)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fin"]
albedo_color = Color(0.22, 0.22, 0.24, 1)

[sub_resource type="QuadMesh" id="QuadMesh_flame"]
size = Vector2(0.06, 0.06)

[sub_resource type="Gradient" id="Gradient_flame"]
colors = PackedColorArray(Color(1, 0.9, 0.6, 0.7), Color(1, 0.4, 0.1, 0.9), Color(0.1, 0.1, 0.1, 0))
offsets = PackedFloat32Array(0, 0.4, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_flame"]
gradient = SubResource("Gradient_flame")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_flame"]
color_ramp = SubResource("GradientTexture1D_flame")
initial_velocity = 2.4
spread = 18.0
direction = Vector3(0, 0, 1)
scale_min = 0.04
scale_max = 0.1

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_rocket"]
radius = 0.09
height = 0.6

[node name="HomingMissile" type="Area3D"]
script = ExtResource("1_missile")

[node name="Visuals" type="Node3D" parent="."]
rotation_degrees = Vector3(-90, 0, 0)

[node name="Body" type="MeshInstance3D" parent="Visuals"]
mesh = SubResource("CylinderMesh_rocket_body")
material_override = SubResource("StandardMaterial3D_body")

[node name="Nose" type="MeshInstance3D" parent="Visuals"]
position = Vector3(0, 0, -0.4)
mesh = SubResource("ConeMesh_rocket_nose")
material_override = SubResource("StandardMaterial3D_nose")

[node name="FinLeft" type="MeshInstance3D" parent="Visuals"]
position = Vector3(-0.08, 0, 0.22)
rotation_degrees = Vector3(0, 0, 90)
mesh = SubResource("BoxMesh_rocket_fin")
material_override = SubResource("StandardMaterial3D_fin")

[node name="FinRight" type="MeshInstance3D" parent="Visuals"]
position = Vector3(0.08, 0, 0.22)
rotation_degrees = Vector3(0, 0, 90)
mesh = SubResource("BoxMesh_rocket_fin")
material_override = SubResource("StandardMaterial3D_fin")

[node name="FinTop" type="MeshInstance3D" parent="Visuals"]
position = Vector3(0, 0.08, 0.22)
mesh = SubResource("BoxMesh_rocket_fin")
material_override = SubResource("StandardMaterial3D_fin")

[node name="FinBottom" type="MeshInstance3D" parent="Visuals"]
position = Vector3(0, -0.08, 0.22)
mesh = SubResource("BoxMesh_rocket_fin")
material_override = SubResource("StandardMaterial3D_fin")

[node name="FlameTrail" type="GPUParticles3D" parent="Visuals"]
position = Vector3(0, 0, 0.36)
amount = 22
lifetime = 0.3
process_material = SubResource("ParticleProcessMaterial_flame")
end_cap_mode = 1
emitting = true
one_shot = false
draw_pass_1 = SubResource("QuadMesh_flame")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_rocket")
rotation_degrees = Vector3(90, 0, 0)
